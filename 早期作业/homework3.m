clc;
clear all;
close all;
syms x y;
n=600:200:4000;
m0=2000;
m1=1800;
m2=3880;
r=0.367;
nt=0.85;
f=0.013;
CdA=2.77;
i0=5.83;
If=0.218;
Iw1=1.798;
Iw2=3.598;
ig=[5.56 2.769 1.644 1 0.793];
L=3.2;
g=9.8;
a=1.947;
hg=0.9;
Ttq=-19.313+295.27.*(n./1000)-165.44.*(n/1000).^2+40.874.*(n/1000).^3-3.8445.*(n/1000).^4;
Ft1=Ttq*ig(1)*i0*nt/r;
Ft2=Ttq*ig(2)*i0*nt/r;
Ft3=Ttq*ig(3)*i0*nt/r;
Ft4=Ttq*ig(4)*i0*nt/r;
Ft5=Ttq*ig(5)*i0*nt/r;
U1=0.377*r*n./(ig(1).*i0);
U2=0.377*r*n./(ig(2).*i0);
U3=0.377*r*n./(ig(3).*i0);
U4=0.377*r*n./(ig(4).*i0);
U5=0.377*r*n./(ig(5).*i0);
Fw1=CdA*U1.^2/21.15;
Fw2=CdA*U2.^2/21.15;
Fw3=CdA*U3.^2/21.15;
Fw4=CdA*U4.^2/21.15;
Fw5=CdA*U5.^2/21.15;
delta1=1+(1/m2).*((Iw1+Iw2)/r^2)+(1/m2).*((If.*ig(1).^2*i0^2*nt)/r^2);
delta2=1+(1/m2).*((Iw1+Iw2)/r^2)+(1/m2).*((If.*ig(2).^2*i0^2*nt)/r^2);
delta3=1+(1/m2).*((Iw1+Iw2)/r^2)+(1/m2).*((If.*ig(3).^2*i0^2*nt)/r^2);
delta4=1+(1/m2).*((Iw1+Iw2)/r^2)+(1/m2).*((If.*ig(4).^2*i0^2*nt)/r^2);
delta5=1+(1/m2).*((Iw1+Iw2)/r^2)+(1/m2).*((If.*ig(5).^2*i0^2*nt)/r^2);
D1=(Ft1-Fw1)./(m2*g);
D2=(Ft2-Fw2)./(m2*g);
D3=(Ft3-Fw3)./(m2*g);
D4=(Ft4-Fw4)./(m2*g);
D5=(Ft5-Fw5)./(m2*g);
A1=delta1./(g*(D1-f));
A2=delta2./(g*(D2-f));
A3=delta3./(g*(D3-f));
A4=delta4./(g*(D4-f));
A5=delta5./(g*(D5-f));
plot(U1,A1,U2,A2,U3,A3,U4,A4,U5,A5);
axis([0 95 0 50])
xlabel("车速(Km/h)")
ylabel("1/a(s^2/m)")
legend('I','II','III','IV','V')
title("加速度倒数曲线")
p1=polyfit(U1,A1,2);
p2=polyfit(U2,A2,2);
p3=polyfit(U3,A3,2);
p4=polyfit(U4,A4,2);
p5=polyfit(U5,A5,2);
f1=poly2sym(p1);
f2=poly2sym(p2)
f3=poly2sym(p3);
f4=poly2sym(p4);
f5=poly2sym(p5);
ustart=min(U2);
u3=max(U2);
u4=max(U3);
uacctop=70;
ustarc_c=min(U4);
%计算原地起步
us3=ustart:0.1:u3;
time_A2=int(f2,x,ustart,u3);
time_A3=int(f3,x,u3,u4);
time_A4=int(f4,x,u4,uacctop);
time_A=eval((time_A2+time_A3+time_A4)/3.6)
%超车起步
ustart_c=40;
time_c=eval(int(f4,x,ustart_c,uacctop)/3.6)
